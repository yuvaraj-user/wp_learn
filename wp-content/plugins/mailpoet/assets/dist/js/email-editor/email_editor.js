!function(){var e={372:function(e,t){var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=r.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)i.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},352:function(e){var t=function(e){return"string"==typeof e};e.exports=function(e,n,i){return Array.isArray(e)||(e=[e]),r=e.map((function(e){return t(e)?function(e,n,i){var r=0,a=0;if(""===e)return e;if(!e||!t(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var o,s,l,c=n;(function(e){return e instanceof RegExp})(c)||(c=new RegExp("("+(o=c,s=/[\\^$.*+?()[\]{}|]/g,l=RegExp(s.source),(o&&l.test(o)?o.replace(s,"\\$&"):o)+")"),"gi"));for(var d=e.split(c),p=1,m=d.length;p<m;p+=2)a=d[p].length,r+=d[p-1].length,d[p]=i(d[p],p,r),r+=a;return d}(e,n,i):e})),a=[],r.forEach((function(e){Array.isArray(e)?a=a.concat(e):a.push(e)})),a;var r,a}},875:function(e,t,n){"use strict";var i=n(196),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,a={},c=null,d=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:d,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},250:function(e,t,n){"use strict";e.exports=n(875)},196:function(e){"use strict";e.exports=window.React}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{disableComplementaryArea:function(){return I},enableComplementaryArea:function(){return T},pinItem:function(){return A},setDefaultComplementaryArea:function(){return N},setFeatureDefaults:function(){return B},setFeatureValue:function(){return R},toggleFeature:function(){return L},unpinItem:function(){return M}});var t={};n.r(t),n.d(t,{getActiveComplementaryArea:function(){return O},isComplementaryAreaLoading:function(){return F},isFeatureActive:function(){return D},isItemPinned:function(){return V}});var i={};n.r(i),n.d(i,{changePreviewDeviceType:function(){return ue},closeSidebar:function(){return ve},openSidebar:function(){return _e},requestSendingNewsletterPreview:function(){return be},saveEditedEmail:function(){return fe},toggleFeature:function(){return de},toggleInserterSidebar:function(){return pe},toggleListviewSidebar:function(){return me},togglePreviewModal:function(){return he},updateEmailMailPoetProperty:function(){return we},updateSendPreviewEmail:function(){return ge}});var r={};n.r(r),n.d(r,{getAutosaveInterval:function(){return Oe},getEmailPostId:function(){return Te},getInitialEditorSettings:function(){return Me},getLayout:function(){return Be},getLayoutStyles:function(){return Re},getPreviewState:function(){return Le},hasEdits:function(){return je},hasEmptyContent:function(){return Ne},isEmailLoaded:function(){return ke},isEmpty:function(){return Ce},isFeatureActive:function(){return xe},isInserterSidebarOpened:function(){return Ie},isListviewSidebarOpened:function(){return Ae},isSaving:function(){return Pe},isSidebarOpened:function(){return Se}}),window.wp.formatLibrary;var a=window.wp.data,o=window.wp.element,s=window.wp.components,l=window.wp.keyboardShortcuts,c=window.wp.coreData,d=window.wp.blockLibrary,p=window.wp.hooks;const m="email-editor/editor",u="email-editor/editor/main/email",h="email-editor/editor/main/block";var g=window.wp.dataControls;function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_.apply(this,arguments)}var v=n(372),f=n.n(v),w=window.wp.i18n,b=window.wp.primitives,y=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),E=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),x=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),S=window.wp.viewport,j=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),k=window.wp.deprecated,P=n.n(k),C=window.wp.preferences;const N=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e,area:t}),T=(e,t)=>n=>{let{registry:i,dispatch:r}=n;t&&(i.select(C.store).get(e,"isComplementaryAreaVisible")||i.dispatch(C.store).set(e,"isComplementaryAreaVisible",!0),r({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},I=e=>t=>{let{registry:n}=t;n.select(C.store).get(e,"isComplementaryAreaVisible")&&n.dispatch(C.store).set(e,"isComplementaryAreaVisible",!1)},A=(e,t)=>n=>{let{registry:i}=n;if(!t)return;const r=i.select(C.store).get(e,"pinnedItems");!0!==(null==r?void 0:r[t])&&i.dispatch(C.store).set(e,"pinnedItems",{...r,[t]:!0})},M=(e,t)=>n=>{let{registry:i}=n;if(!t)return;const r=i.select(C.store).get(e,"pinnedItems");i.dispatch(C.store).set(e,"pinnedItems",{...r,[t]:!1})};function L(e,t){return function(n){let{registry:i}=n;P()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),i.dispatch(C.store).toggle(e,t)}}function R(e,t,n){return function(i){let{registry:r}=i;P()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),r.dispatch(C.store).set(e,t,!!n)}}function B(e,t){return function(n){let{registry:i}=n;P()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),i.dispatch(C.store).setDefaults(e,t)}}const O=(0,a.createRegistrySelector)((e=>(t,n)=>{var i;const r=e(C.store).get(n,"isComplementaryAreaVisible");if(void 0!==r)return!1===r?null:null==t||null===(i=t.complementaryAreas)||void 0===i?void 0:i[n]})),F=(0,a.createRegistrySelector)((e=>(t,n)=>{var i;const r=e(C.store).get(n,"isComplementaryAreaVisible"),a=null==t||null===(i=t.complementaryAreas)||void 0===i?void 0:i[n];return r&&void 0===a})),V=(0,a.createRegistrySelector)((e=>(t,n,i)=>{var r;const a=e(C.store).get(n,"pinnedItems");return null===(r=null==a?void 0:a[i])||void 0===r||r})),D=(0,a.createRegistrySelector)((e=>(t,n,i)=>(P()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(C.store).get(n,i))));var z=(0,a.combineReducers)({complementaryAreas:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:n,area:i}=t;return e[n]?e:{...e,[n]:i}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:n,area:i}=t;return{...e,[n]:i}}}return e}});const G=(0,a.createReduxStore)("core/interface",{reducer:z,actions:e,selectors:t});(0,a.register)(G);var H=(0,window.wp.plugins.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),U=H((function(e){let{as:t=s.Button,scope:n,identifier:i,icon:r,selectedIcon:l,name:c,...d}=e;const p=t,m=(0,a.useSelect)((e=>e(G).getActiveComplementaryArea(n)===i),[i]),{enableComplementaryArea:u,disableComplementaryArea:h}=(0,a.useDispatch)(G);return(0,o.createElement)(p,_({icon:l&&m?l:r,onClick:()=>{m?h(n):u(n,i)}},d))})),$=e=>{let{smallScreenTitle:t,children:n,className:i,toggleButtonProps:r}=e;const a=(0,o.createElement)(U,_({icon:j},r));return(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},t&&(0,o.createElement)("span",{className:"interface-complementary-area-header__small-title"},t),a),(0,o.createElement)("div",{className:f()("components-panel__header","interface-complementary-area-header",i),tabIndex:-1},n,a))};const W=()=>{};function K(e){let{name:t,as:n=s.Button,onClick:i,...r}=e;return(0,o.createElement)(s.Fill,{name:t},(e=>{let{onClick:t}=e;return(0,o.createElement)(n,_({onClick:i||t?function(){(i||W)(...arguments),(t||W)(...arguments)}:void 0},r))}))}K.Slot=function(e){let{name:t,as:n=s.ButtonGroup,fillProps:i={},bubblesVirtually:r,...a}=e;return(0,o.createElement)(s.Slot,{name:t,bubblesVirtually:r,fillProps:i},(e=>{if(!o.Children.toArray(e).length)return null;const t=[];o.Children.forEach(e,(e=>{let{props:{__unstableExplicitMenuItem:n,__unstableTarget:i}}=e;i&&n&&t.push(i)}));const i=o.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&t.includes(e.props.__unstableTarget)?null:e));return(0,o.createElement)(n,a,i)}))};var Y=K;const q=e=>{let{__unstableExplicitMenuItem:t,__unstableTarget:n,...i}=e;return(0,o.createElement)(s.MenuItem,i)};function J(e){let{scope:t,target:n,__unstableExplicitMenuItem:i,...r}=e;return(0,o.createElement)(U,_({as:e=>(0,o.createElement)(Y,_({__unstableExplicitMenuItem:i,__unstableTarget:`${t}/${n}`,as:q,name:`${t}/plugin-more-menu`},e)),role:"menuitemcheckbox",selectedIcon:y,name:n,scope:t},r))}function Q(e){let{scope:t,...n}=e;return(0,o.createElement)(s.Fill,_({name:`PinnedItems/${t}`},n))}Q.Slot=function(e){let{scope:t,className:n,...i}=e;return(0,o.createElement)(s.Slot,_({name:`PinnedItems/${t}`},i),(e=>(null==e?void 0:e.length)>0&&(0,o.createElement)("div",{className:f()(n,"interface-pinned-items")},e)))};var X=Q;function Z(e){let{scope:t,children:n,className:i}=e;return(0,o.createElement)(s.Fill,{name:`ComplementaryArea/${t}`},(0,o.createElement)("div",{className:i},n))}const ee=H((function(e){let{children:t,className:n,closeLabel:i=(0,w.__)("Close plugin"),identifier:r,header:l,headerClassName:c,icon:d,isPinnable:p=!0,panelClassName:m,scope:u,name:h,smallScreenTitle:g,title:_,toggleShortcut:v,isActiveByDefault:b,showIconLabels:j=!1}=e;const{isLoading:k,isActive:P,isPinned:C,activeArea:N,isSmall:T,isLarge:I}=(0,a.useSelect)((e=>{const{getActiveComplementaryArea:t,isComplementaryAreaLoading:n,isItemPinned:i}=e(G),a=t(u);return{isLoading:n(u),isActive:a===r,isPinned:i(u,r),activeArea:a,isSmall:e(S.store).isViewportMatch("< medium"),isLarge:e(S.store).isViewportMatch("large")}}),[r,u]);!function(e,t,n,i,r){const s=(0,o.useRef)(!1),l=(0,o.useRef)(!1),{enableComplementaryArea:c,disableComplementaryArea:d}=(0,a.useDispatch)(G);(0,o.useEffect)((()=>{i&&r&&!s.current?(d(e),l.current=!0):l.current&&!r&&s.current?(l.current=!1,c(e,t)):l.current&&n&&n!==t&&(l.current=!1),r!==s.current&&(s.current=r)}),[i,r,e,t,n])}(u,r,N,P,T);const{enableComplementaryArea:A,disableComplementaryArea:M,pinItem:L,unpinItem:R}=(0,a.useDispatch)(G);return(0,o.useEffect)((()=>{b&&void 0===N&&!T?A(u,r):void 0===N&&T&&M(u,r)}),[N,b,u,r,T]),(0,o.createElement)(o.Fragment,null,p&&(0,o.createElement)(X,{scope:u},C&&(0,o.createElement)(U,{scope:u,identifier:r,isPressed:P&&(!j||I),"aria-expanded":P,"aria-disabled":k,label:_,icon:j?y:d,showTooltip:!j,variant:j?"tertiary":void 0})),h&&p&&(0,o.createElement)(J,{target:h,scope:u,icon:d},_),P&&(0,o.createElement)(Z,{className:f()("interface-complementary-area",n),scope:u},(0,o.createElement)($,{className:c,closeLabel:i,onClose:()=>M(u),smallScreenTitle:g,toggleButtonProps:{label:i,shortcut:v,scope:u,identifier:r}},l||(0,o.createElement)(o.Fragment,null,(0,o.createElement)("strong",null,_),p&&(0,o.createElement)(s.Button,{className:"interface-complementary-area__pin-unpin-item",icon:C?E:x,label:C?(0,w.__)("Unpin from toolbar"):(0,w.__)("Pin to toolbar"),onClick:()=>(C?R:L)(u,r),isPressed:C,"aria-expanded":C}))),(0,o.createElement)(s.Panel,{className:m},t)))}));ee.Slot=function(e){let{scope:t,...n}=e;return(0,o.createElement)(s.Slot,_({name:`ComplementaryArea/${t}`},n))};var te=ee,ne=e=>{let{isActive:t}=e;return(0,o.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,o.useEffect)((()=>(t?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{t&&document.body.classList.remove("is-fullscreen-mode")})),[t]),null},ie=window.wp.compose;function re(e){let{children:t,className:n,ariaLabel:i,as:r="div",...a}=e;return(0,o.createElement)(r,_({className:f()("interface-navigable-region",n),"aria-label":i,role:"region",tabIndex:"-1"},a),t)}var ae=(0,o.forwardRef)((function(e,t){let{isDistractionFree:n,footer:i,header:r,editorNotices:a,sidebar:l,secondarySidebar:c,notices:d,content:p,actions:m,labels:u,className:h,enableRegionNavigation:g=!0,shortcuts:v}=e;const b=(0,s.__unstableUseNavigateRegions)(v);!function(e){(0,o.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const y={
/* translators: accessibility text for the top bar landmark region. */
header:(0,w.__)("Header"),
/* translators: accessibility text for the content landmark region. */
body:(0,w.__)("Content"),
/* translators: accessibility text for the secondary sidebar landmark region. */
secondarySidebar:(0,w.__)("Block Library"),
/* translators: accessibility text for the settings landmark region. */
sidebar:(0,w.__)("Settings"),
/* translators: accessibility text for the publish landmark region. */
actions:(0,w.__)("Publish"),
/* translators: accessibility text for the footer landmark region. */
footer:(0,w.__)("Footer"),...u},E={hidden:n?{opacity:0}:{opacity:1},hover:{opacity:1,transition:{type:"tween",delay:.2,delayChildren:.2}}};return(0,o.createElement)("div",_({},g?b:{},{ref:(0,ie.useMergeRefs)([t,g?b.ref:void 0]),className:f()(h,"interface-interface-skeleton",b.className,!!i&&"has-footer")}),(0,o.createElement)("div",{className:"interface-interface-skeleton__editor"},!!r&&n&&(0,o.createElement)(re,{as:s.__unstableMotion.div,className:"interface-interface-skeleton__header","aria-label":y.header,initial:n?"hidden":"hover",whileHover:"hover",variants:E,transition:{type:"tween",delay:.8}},r),!!r&&!n&&(0,o.createElement)(re,{className:"interface-interface-skeleton__header",ariaLabel:y.header},r),n&&(0,o.createElement)("div",{className:"interface-interface-skeleton__header"},a),(0,o.createElement)("div",{className:"interface-interface-skeleton__body"},!!c&&(0,o.createElement)(re,{className:"interface-interface-skeleton__secondary-sidebar",ariaLabel:y.secondarySidebar},c),!!d&&(0,o.createElement)("div",{className:"interface-interface-skeleton__notices"},d),(0,o.createElement)(re,{className:"interface-interface-skeleton__content",ariaLabel:y.body},p),!!l&&(0,o.createElement)(re,{className:"interface-interface-skeleton__sidebar",ariaLabel:y.sidebar},l),!!m&&(0,o.createElement)(re,{className:"interface-interface-skeleton__actions",ariaLabel:y.actions},m))),!!i&&(0,o.createElement)(re,{className:"interface-interface-skeleton__footer",ariaLabel:y.footer},i))})),oe=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"}));function se(e){let{as:t=s.DropdownMenu,className:n,label:
/* translators: button label text should, if possible, be under 16 characters. */
i=(0,w.__)("Options"),popoverProps:r,toggleProps:a,children:l}=e;return(0,o.createElement)(t,{className:f()("interface-more-menu-dropdown",n),icon:oe,label:i,popoverProps:{placement:"bottom-end",...r,className:f()("interface-more-menu-dropdown__content",null==r?void 0:r.className)},toggleProps:{tooltipPosition:"bottom",...a}},(e=>l(e)))}var le=window.wp.notices;let ce=function(e){return e.SUCCESS="success",e.ERROR="error",e}({});const de=e=>t=>{let{registry:n}=t;return n.dispatch(C.store).toggle(m,e)};function pe(){return{type:"TOGGLE_INSERTER_SIDEBAR"}}function me(){return{type:"TOGGLE_LISTVIEW_SIDEBAR"}}function ue(e){return{type:"CHANGE_PREVIEW_STATE",state:{deviceType:e}}}function he(e){return{type:"CHANGE_PREVIEW_STATE",state:{isModalOpened:e}}}function ge(e){return{type:"CHANGE_PREVIEW_STATE",state:{toEmail:e}}}const _e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return t=>{let{registry:n}=t;return n.dispatch(G).enableComplementaryArea(m,e)}},ve=()=>e=>{let{registry:t}=e;return t.dispatch(G).disableComplementaryArea(m)};function*fe(){const e=(0,a.select)(m).getEmailPostId(),t=yield(0,a.dispatch)(c.store).saveEditedEntityRecord("postType","mailpoet_email",e,{throwOnError:!0});t.then((()=>{(0,a.dispatch)(le.store).createErrorNotice((0,w.__)("Email saved!","mailpoet"),{type:"snackbar",isDismissible:!0})})),t.catch((()=>{(0,a.dispatch)(le.store).createErrorNotice((0,w.__)("There was an error saving email!","mailpoet"),{type:"default",isDismissible:!0})}))}function*we(e,t){const n=(0,a.select)(m).getEmailPostId(),i=(0,a.select)(c.store).getEditedEntityRecord("postType","mailpoet_email",n),r=i?.mailpoet_data||{};yield(0,a.dispatch)(c.store).editEntityRecord("postType","mailpoet_email",n,{mailpoet_data:{...r,[e]:t}})}function*be(e,t){if(!(0,a.select)(m).getPreviewState().isSendingPreviewEmail){yield{type:"CHANGE_PREVIEW_STATE",state:{sendingPreviewStatus:null,isSendingPreviewEmail:!0}};try{const n=window.MailPoetEmailEditor.json_api_root,i=window.MailPoetEmailEditor.api_token,r="POST",a=new FormData;a.append("token",i),a.append("action","mailpoet"),a.append("api_version",window.MailPoetEmailEditor.api_version),a.append("endpoint","newsletters"),a.append("method","sendPreview"),a.append("data[subscriber]",t),a.append("data[id]",e.toString()),yield(0,g.apiFetch)({url:n,method:r,body:a}),yield{type:"CHANGE_PREVIEW_STATE",state:{sendingPreviewStatus:ce.SUCCESS,isSendingPreviewEmail:!1}}}catch(e){yield{type:"CHANGE_PREVIEW_STATE",state:{sendingPreviewStatus:ce.ERROR,isSendingPreviewEmail:!1}}}}}function ye(){const e=new URLSearchParams(window.location.search);return{inserterSidebar:{isOpened:!1},listviewSidebar:{isOpened:!1},postId:parseInt(e.get("postId"),10),editorSettings:window.MailPoetEmailEditor.editor_settings,layoutStyles:window.MailPoetEmailEditor.email_layout_styles,layout:window.MailPoetEmailEditor.editor_layout,autosaveInterval:60,preview:{deviceType:"Desktop",toEmail:window.MailPoetEmailEditor.current_wp_user_email,isModalOpened:!1,isSendingPreviewEmail:!1,sendingPreviewStatus:null}}}function Ee(e,t){switch(t.type){case"TOGGLE_INSERTER_SIDEBAR":return{...e,inserterSidebar:{...e.inserterSidebar,isOpened:!e.inserterSidebar.isOpened},listviewSidebar:{...e.listviewSidebar,isOpened:!1}};case"TOGGLE_LISTVIEW_SIDEBAR":return{...e,inserterSidebar:{...e.inserterSidebar,isOpened:!1},listviewSidebar:{...e.listviewSidebar,isOpened:!e.listviewSidebar.isOpened}};case"CHANGE_PREVIEW_STATE":return{...e,preview:{...e.preview,...t.state}};default:return e}}const xe=(0,a.createRegistrySelector)((e=>(t,n)=>!!e(C.store).get(m,n))),Se=(0,a.createRegistrySelector)((e=>()=>!!e(G).getActiveComplementaryArea(m))),je=(0,a.createRegistrySelector)((e=>()=>{const t=e(m).getEmailPostId();return!!e(c.store).hasEditsForEntityRecord("postType","mailpoet_email",t)})),ke=(0,a.createRegistrySelector)((e=>()=>{const t=e(m).getEmailPostId();return!!e(c.store).getEntityRecord("postType","mailpoet_email",t)})),Pe=(0,a.createRegistrySelector)((e=>()=>{const t=e(m).getEmailPostId();return!!e(c.store).isSavingEntityRecord("postType","mailpoet_email",t)})),Ce=(0,a.createRegistrySelector)((e=>()=>{const t=e(m).getEmailPostId(),n=e(c.store).getEntityRecord("postType","mailpoet_email",t);if(!n)return!0;const{content:i,mailpoet_data:r,title:a}=n;return!(i.raw||r.subject||r.preheader||a.raw)})),Ne=(0,a.createRegistrySelector)((e=>()=>{const t=e(m).getEmailPostId(),n=e(c.store).getEntityRecord("postType","mailpoet_email",t);if(!n)return!0;const{content:i}=n;return!i.raw}));function Te(e){return e.postId}function Ie(e){return e.inserterSidebar.isOpened}function Ae(e){return e.listviewSidebar.isOpened}function Me(e){return e.editorSettings}function Le(e){return e.preview}function Re(e){return e.layoutStyles}function Be(e){return e.layout}function Oe(e){return e.autosaveInterval}var Fe=window.wp.blockEditor,Ve=n(250);const De=(0,ie.createHigherOrderComponent)((e=>function(t){return"core/columns"!==t.name?(0,Ve.jsx)(e,{...t}):(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(e,{...t}),(0,Ve.jsx)(Fe.InspectorControls,{children:(0,Ve.jsx)("style",{children:"\n      .components-panel__body .components-toggle-control .components-form-toggle { opacity: 0.3; }\n      .components-panel__body .components-toggle-control .components-form-toggle__input { pointer-events: none; }\n      .components-panel__body .components-toggle-control label { pointer-events: none; }\n    "})})]})}),"columnsEditCallback"),ze=(0,ie.createHigherOrderComponent)((e=>function(t){return"core/image"!==t.name?(0,Ve.jsx)(e,{...t}):(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(e,{...t}),(0,Ve.jsx)(Fe.InspectorControls,{children:(0,Ve.jsx)("style",{children:"\n        .components-tools-panel .components-toggle-control { display: none; }\n      "})})]})}),"imageEditCallback");var Ge=window.wp.richText;var He=window.wp.blocks,Ue=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M9 9v6h11V9H9zM4 20h1.5V4H4v16z"})),$e=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M20 9h-7.2V4h-1.6v5H4v6h7.2v5h1.6v-5H20z"})),We=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M4 15h11V9H4v6zM18.5 4v16H20V4h-1.5z"}));const Ke="__experimentalEmailFlexLayout";function Ye(e){return(0,He.hasBlockSupport)(e,Ke)}function qe(e){let{justificationValue:t,onChange:n,isToolbar:i=!1}=e;const r=[{value:"left",icon:Ue,label:(0,w.__)("Justify items left")},{value:"center",icon:$e,label:(0,w.__)("Justify items center")},{value:"right",icon:We,label:(0,w.__)("Justify items right")}];if(i){const e=r.map((e=>e.value));return(0,Ve.jsx)(Fe.JustifyContentControl,{value:t,onChange:n,allowedControls:e,popoverProps:{placement:"bottom-start"}})}return(0,Ve.jsx)(s.__experimentalToggleGroupControl,{__nextHasNoMarginBottom:!0,label:(0,w.__)("Justification"),value:t,onChange:n,className:"block-editor-hooks__flex-layout-justification-controls",children:r.map((e=>{let{value:t,icon:n,label:i}=e;return(0,Ve.jsx)(s.__experimentalToggleGroupControlOptionIcon,{value:t,icon:n,label:i},t)}))})}function Je(e){let{setAttributes:t,attributes:n,name:i}=e;if(!(0,He.getBlockSupport)(i,Ke,{}))return null;const{justifyContent:r="left"}=n.layout||{},a=e=>{t({layout:{...n.layout,justifyContent:e}})};return(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(Fe.InspectorControls,{children:(0,Ve.jsx)(s.PanelBody,{title:(0,w.__)("Layout"),children:(0,Ve.jsx)(s.Flex,{children:(0,Ve.jsx)(s.FlexItem,{children:(0,Ve.jsx)(qe,{justificationValue:r,onChange:a})})})})}),(0,Ve.jsx)(Fe.BlockControls,{group:"block",__experimentalShareWithChildBlocks:!0,children:(0,Ve.jsx)(qe,{justificationValue:r,onChange:a,isToolbar:!0})})]})}function Qe(e){return Ye(e.name)?{...e,attributes:{...e.attributes,layout:{type:"object"}}}:e}const Xe=(0,ie.createHigherOrderComponent)((e=>t=>[Ye(t.name)&&(0,Ve.jsx)(Je,{...t},"layout"),(0,Ve.jsx)(e,{...t},"edit")]),"withLayoutControls");function Ze(e){let{block:t,props:n}=e;const{attributes:i}=n,{layout:r}=i,a=`is-content-justification-${r?.justifyContent||"left"}`,o=f()(a,"is-layout-email-flex is-layout-flex");return(0,Ve.jsx)(t,{...n,className:o})}const et=(0,ie.createHigherOrderComponent)((e=>function(t){return Ye(t.name)?(0,Ve.jsx)(Ze,{block:e,props:t}):(0,Ve.jsx)(e,{...t})}),"withLayoutStyles");var tt=window.wp.editor,nt=window.wp.mediaUtils;function it(){const{hasEdits:e,autosaveInterval:t}=(0,a.useSelect)((e=>({hasEdits:e(m).hasEdits(),autosaveInterval:e(m).getAutosaveInterval()})),[]),{saveEditedEmail:n}=(0,a.useDispatch)(m);return(0,o.useEffect)((()=>{let i;return e&&t>0&&(i=setTimeout((()=>{n()}),1e3*t)),()=>{i&&clearTimeout(i)}}),[e,t,n]),null}var rt=(0,o.createElement)(b.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 4H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4 14.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h8v13zm4.5-.5c0 .3-.2.5-.5.5h-2.5v-13H18c.3 0 .5.2.5.5v12z"}));function at(e){let{sidebarKey:t}=e;const{openSidebar:n}=(0,a.useDispatch)(m),i=(0,a.useSelect)((e=>e(Fe.store).getSelectedBlockClientId()),[]);return(0,o.useEffect)((()=>{n(i?h:u)}),[i,n]),(0,Ve.jsx)("div",{className:"components-panel__header interface-complementary-area-header edit-post-sidebar__panel-tabs",children:(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:(0,Ve.jsx)("button",{onClick:()=>{n(u)},className:f()("components-button edit-post-sidebar__panel-tab",{"is-active":t===u}),"data-automation-id":"email_settings_tab",type:"button",children:(0,w.__)("Email","mailpoet")})}),(0,Ve.jsx)("li",{children:(0,Ve.jsx)("button",{onClick:()=>{n(h)},className:f()("components-button edit-post-sidebar__panel-tab",{"is-active":t===h}),"data-automation-id":"mailpoet_block_settings_tab",type:"button",children:(0,w.__)("Block")})})]})})}var ot=n(352),st=n.n(ot);const lt=150,ct=80;function dt(){const[e]=(0,c.useEntityProp)("postType","mailpoet_email","mailpoet_data"),{updateEmailMailPoetProperty:t}=(0,a.useDispatch)(m);let n=st()((0,w.__)("Use shortcodes to personalize your email, or learn more about [link1]best practices[/link1] and using [link2]emoji in subject lines[/link2].","mailpoet"),/\[link1\](.*?)\[\/link1\]/g,((e,t)=>(0,Ve.jsx)("a",{href:"https://www.mailpoet.com/blog/17-email-subject-line-best-practices-to-boost-engagement/",target:"_blank",rel:"noopener noreferrer",children:e},t)));n=st()(n,/\[link2\](.*?)\[\/link2\]/g,((e,t)=>(0,Ve.jsx)("a",{href:"https://www.mailpoet.com/blog/tips-using-emojis-in-subject-lines/",target:"_blank",rel:"noopener noreferrer",children:e},t)));const i=(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)("span",{children:(0,w.__)("Subject","mailpoet")}),(0,Ve.jsx)(s.ExternalLink,{href:"https://kb.mailpoet.com/article/215-personalize-newsletter-with-shortcodes#list",children:(0,w.__)("Shortcode guide","mailpoet")})]}),r=e?.preheader?.length??0,l=(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)("span",{children:(0,w.__)("Preview text","mailpoet")}),(0,Ve.jsxs)("span",{className:f()("mailpoet-settings-panel__preview-text-length",{"mailpoet-settings-panel__preview-text-length-warning":r>ct,"mailpoet-settings-panel__preview-text-length-error":r>lt}),children:[r,"/",lt]})]});return(0,Ve.jsxs)(s.PanelBody,{title:(0,w.__)("Details","mailpoet"),className:"mailpoet-email-editor__settings-panel",children:[(0,Ve.jsx)(s.TextareaControl,{className:"mailpoet-settings-panel__subject",label:i,placeholder:(0,w.__)("Eg. The summer sale is here!","mailpoet"),value:e?.subject??"",onChange:e=>t("subject",e),"data-automation-id":"email_subject"}),(0,Ve.jsx)("div",{className:"mailpoet-settings-panel__help",children:(0,Ve.jsx)(s.__experimentalText,{children:n})}),(0,Ve.jsx)(s.TextareaControl,{className:"mailpoet-settings-panel__preview-text",label:l,placeholder:(0,w.__)("Add a preview text to capture subscribers' attention and increase open rates.","mailpoet"),value:e?.preheader??"",onChange:e=>t("preheader",e),"data-automation-id":"email_preview_text"}),(0,Ve.jsx)("div",{className:"mailpoet-settings-panel__help",children:(0,Ve.jsx)(s.__experimentalText,{children:(0,o.createInterpolateElement)((0,w.__)("<link>This text</link> will appear in the inbox, underneath the subject line.","mailpoet"),{link:(0,Ve.jsx)("a",{href:new URL("article/418-preview-text","https://kb.mailpoet.com/").toString(),target:"_blank",rel:"noopener noreferrer"},"preview-text-kb")})})})]})}var pt=function(e){let{icon:t,size:n=24,...i}=e;return(0,o.cloneElement)(t,{width:n,height:n,...i})},mt=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{fillRule:"evenodd",d:"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z",clipRule:"evenodd"}));function ut(){return(0,Ve.jsx)(s.Panel,{className:"mailpoet-email-sidebar__email-type-info",children:(0,Ve.jsx)(s.PanelBody,{children:(0,Ve.jsxs)(s.PanelRow,{children:[(0,Ve.jsx)("span",{className:"mailpoet-email-type-info__icon",children:(0,Ve.jsx)(pt,{icon:mt})}),(0,Ve.jsxs)("div",{className:"mailpoet-email-type-info__content",children:[(0,Ve.jsx)("h2",{children:(0,w.__)("Newsletter","mailpoet")}),(0,Ve.jsx)("span",{children:(0,w.__)("Send or schedule a newsletter to connect with your subscribers.","mailpoet")})]})]})})})}function ht(){return(0,Ve.jsxs)(s.Panel,{children:[(0,Ve.jsx)(ut,{}),(0,Ve.jsx)(dt,{})]})}function gt(e){const{sidebarKey:t}=(0,a.useSelect)((e=>({sidebarKey:e(G).getActiveComplementaryArea(m)??u})));return(0,Ve.jsxs)(te,{identifier:t,className:"edit-post-sidebar",header:(0,Ve.jsx)(at,{sidebarKey:t}),icon:rt,scope:m,smallScreenTitle:(0,w.__)("No title","mailpoet"),isActiveByDefault:!0,...e,children:[t===u&&(0,Ve.jsx)(ht,{}),t===h&&(0,Ve.jsx)(s.Panel,{children:(0,Ve.jsx)(Fe.BlockInspector,{})})]})}var _t=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"})),vt=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"})),ft=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})),wt=(0,o.createElement)(b.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(b.Path,{d:"M13.8 5.2H3v1.5h10.8V5.2zm-3.6 12v1.5H21v-1.5H10.2zm7.2-6H6.6v1.5h10.8v-1.5z"})),bt=window.wp.keycodes;function yt(){return(0,Ve.jsx)(se,{className:"edit-site-more-menu",popoverProps:{className:"edit-site-more-menu__content"},children:()=>(0,Ve.jsxs)(s.MenuGroup,{label:(0,w._x)("View","noun","mailpoet"),children:[(0,Ve.jsx)(C.PreferenceToggleMenuItem,{scope:m,name:"fixedToolbar",label:(0,w.__)("Top toolbar","mailpoet"),info:(0,w.__)("Access all block and document tools in a single place","mailpoet"),messageActivated:(0,w.__)("Top toolbar activated","mailpoet"),messageDeactivated:(0,w.__)("Top toolbar deactivated","mailpoet")}),(0,Ve.jsx)(C.PreferenceToggleMenuItem,{scope:m,name:"focusMode",label:(0,w.__)("Spotlight mode","mailpoet"),info:(0,w.__)("Focus at one block at a time","mailpoet"),messageActivated:(0,w.__)("Spotlight mode activated","mailpoet"),messageDeactivated:(0,w.__)("Spotlight mode deactivated","mailpoet")}),(0,Ve.jsx)(C.PreferenceToggleMenuItem,{scope:m,name:"fullscreenMode",label:(0,w.__)("Fullscreen mode","mailpoet"),info:(0,w.__)("Work without distraction","mailpoet"),messageActivated:(0,w.__)("Fullscreen mode activated","mailpoet"),messageDeactivated:(0,w.__)("Fullscreen mode deactivated","mailpoet"),shortcut:bt.displayShortcut.secondary("f")})]})})}var Et=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"})),xt=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})),St=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),jt=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M18.2 17c0 .7-.6 1.2-1.2 1.2H7c-.7 0-1.2-.6-1.2-1.2V7c0-.7.6-1.2 1.2-1.2h3.2V4.2H7C5.5 4.2 4.2 5.5 4.2 7v10c0 1.5 1.2 2.8 2.8 2.8h10c1.5 0 2.8-1.2 2.8-2.8v-3.6h-1.5V17zM14.9 3v1.5h3.7l-6.4 6.4 1.1 1.1 6.4-6.4v3.7h1.5V3h-6.3z"})),kt=window.wp.url;function Pt(){const{requestSendingNewsletterPreview:e,togglePreviewModal:t,updateSendPreviewEmail:n}=(0,a.useDispatch)(m),{toEmail:i,isSendingPreviewEmail:r,sendingPreviewStatus:l,isModalOpened:d}=(0,a.useSelect)((e=>e(m).getPreviewState()),[]),[p]=(0,c.useEntityProp)("postType","mailpoet_email","mailpoet_data"),u=()=>{e(p.id,i)},h=()=>t(!1);return d?(0,Ve.jsxs)(s.Modal,{className:"mailpoet-send-preview-email",title:(0,w.__)("Send a test email","mailpoet"),onRequestClose:h,focusOnMount:"firstContentElement",children:[l===ce.ERROR?(0,Ve.jsxs)("div",{className:"mailpoet-send-preview-modal-notice-error",children:[(0,w.__)("Sorry, we were unable to send this email.","mailpoet"),(0,Ve.jsxs)("ul",{children:[(0,Ve.jsx)("li",{children:(0,o.createInterpolateElement)((0,w.__)("Please check your <link>sending method configuration</link> with your hosting provider.","mailpoet"),{link:(0,Ve.jsx)("a",{href:"admin.php?page=mailpoet-settings#mta",target:"_blank",rel:"noopener noreferrer"})})}),(0,Ve.jsx)("li",{children:(0,o.createInterpolateElement)((0,w.__)("Or, sign up for MailPoet Sending Service to easily send emails. <link>Sign up for free</link>","mailpoet"),{link:(0,Ve.jsx)("a",{href:new URL("free-plan","https://www.mailpoet.com/").toString(),target:"_blank",rel:"noopener noreferrer"},"sign-up-for-free")})})]})]}):null,(0,Ve.jsx)("p",{children:(0,o.createInterpolateElement)((0,w.__)("Send yourself a test email to test how your email would look like in different email apps. You can also test your spam score by sending a test email to <link1>{$serviceName}</link1>. <link2>Learn more</link2>.","mailpoet").replace("{$serviceName}","Mail Tester"),{link1:(0,Ve.jsx)("a",{href:"https://www.mail-tester.com/",target:"_blank",rel:"noopener noreferrer",tabIndex:-1}),link2:(0,Ve.jsx)("a",{href:"https://kb.mailpoet.com/article/147-test-your-spam-score-with-mail-tester",target:"_blank",rel:"noopener noreferrer",tabIndex:-1})})}),(0,Ve.jsx)(s.TextControl,{label:(0,w.__)("Send to","mailpoet"),onChange:e=>{n(e)},onKeyDown:e=>{const{keyCode:t}=e;t===bt.ENTER&&(e.preventDefault(),u())},value:i,type:"email",required:!0}),l===ce.SUCCESS?(0,Ve.jsxs)("p",{className:"mailpoet-send-preview-modal-notice-success",children:[(0,Ve.jsx)(pt,{icon:St,style:{fill:"#4AB866"}}),(0,w.__)("Test email sent successfully!","mailpoet")]}):null,(0,Ve.jsxs)("div",{className:"mailpoet-send-preview-modal-footer",children:[(0,Ve.jsx)(s.Button,{variant:"tertiary",onClick:h,children:(0,w.__)("Close","mailpoet")}),(0,Ve.jsx)(s.Button,{variant:"primary",onClick:u,disabled:r||!(0,kt.isEmail)(i),children:r?(0,w.__)("Sending...","mailpoet"):(0,w.__)("Send test email","mailpoet")})]})]}):null}function Ct(){const[e]=(0,c.useEntityProp)("postType","mailpoet_email","mailpoet_data"),t=(0,a.useSelect)((e=>{const{deviceType:t}=e(m).getPreviewState();return t}),[]),{changePreviewDeviceType:n,togglePreviewModal:i}=(0,a.useDispatch)(m),r=e?.preview_url||"",o=e=>{n(e)},l={mobile:Et,desktop:xt};return(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(s.DropdownMenu,{className:"mailpoet-preview-dropdown",label:(0,w.__)("Preview","mailpoet"),icon:l[t.toLowerCase()],children:e=>{let{onClose:n}=e;return(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsxs)(s.MenuGroup,{children:[(0,Ve.jsx)(s.MenuItem,{className:"block-editor-post-preview__button-resize",onClick:()=>o("Desktop"),icon:"Desktop"===t&&St,children:(0,w.__)("Desktop")}),(0,Ve.jsx)(s.MenuItem,{className:"block-editor-post-preview__button-resize",onClick:()=>o("Mobile"),icon:"Mobile"===t&&St,children:(0,w.__)("Mobile")})]}),(0,Ve.jsx)(s.MenuGroup,{children:(0,Ve.jsx)(s.MenuItem,{className:"block-editor-post-preview__button-resize",onClick:()=>{i(!0),n()},children:(0,w.__)("Send a test email","mailpoet")})}),r?(0,Ve.jsx)(s.MenuGroup,{children:(0,Ve.jsx)("div",{className:"edit-post-header-preview__grouping-external",children:(0,Ve.jsxs)(s.Button,{className:"edit-post-header-preview__button-external",onClick:()=>{var e;e=r,window.open(e,"_blank","noreferrer")},children:[(0,w.__)("Preview in new tab"),(0,Ve.jsx)(pt,{icon:jt})]})})}):null]})}}),(0,Ve.jsx)(Pt,{})]})}var Nt=(0,o.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(b.Path,{d:"M17.3 10.1c0-2.5-2.1-4.4-4.8-4.4-2.2 0-4.1 1.4-4.6 3.3h-.2C5.7 9 4 10.7 4 12.8c0 2.1 1.7 3.8 3.7 3.8h9c1.8 0 3.2-1.5 3.2-3.3.1-1.6-1.1-2.9-2.6-3.2zm-.5 5.1h-9c-1.2 0-2.2-1.1-2.2-2.3s1-2.4 2.2-2.4h1.3l.3-1.1c.4-1.3 1.7-2.2 3.2-2.2 1.8 0 3.3 1.3 3.3 2.9v1.3l1.3.2c.8.1 1.4.9 1.4 1.8-.1 1-.9 1.8-1.8 1.8z"}));function Tt(){const{saveEditedEmail:e}=(0,a.useDispatch)(m),{hasEdits:t,isEmpty:n,isSaving:i}=(0,a.useSelect)((e=>({hasEdits:e(m).hasEdits(),isEmpty:e(m).isEmpty(),isSaving:e(m).isSaving()})),[]),r=!n&&!i&&!t,o=n||i||r;let l=(0,w.__)("Save Draft","mailpoet");return r?l=(0,w.__)("Saved","mailpoet"):i&&(l=(0,w.__)("Saving","mailpoet")),(0,Ve.jsxs)(s.Button,{variant:"tertiary",disabled:o,onClick:e,children:[i&&(0,Ve.jsx)(pt,{icon:Nt}),r&&(0,Ve.jsx)(pt,{icon:St}),l]})}var It=(0,o.createElement)(b.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(b.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));function At(){const{showIconLabels:e}=(0,a.useSelect)((e=>({showIconLabels:e(m).isFeatureActive("showIconLabels"),postId:e(m).getEmailPostId()})),[]),[t="",n]=(0,c.useEntityProp)("postType","mailpoet_email","title"),i=(0,o.useRef)(null);return(0,Ve.jsx)("div",{ref:i,className:"mailpoet-email-editor-campaign-name",children:(0,Ve.jsx)(s.Dropdown,{popoverProps:{placement:"bottom",anchor:i.current},contentClassName:"mailpoet-email-editor-campaign-name__dropdown",renderToggle:n=>{let{isOpen:i,onToggle:r}=n;return(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(s.Button,{onClick:r,className:"mailpoet-email-campaign-name__link",children:(0,Ve.jsxs)(s.__experimentalText,{size:"body",as:"h1",children:[(0,Ve.jsx)(s.VisuallyHidden,{as:"span",children:(0,w.__)("Editing email:","mailpoet")}),t]})}),(0,Ve.jsx)(s.Button,{className:"mailpoet-email-campaign-name__toggle",icon:It,"aria-expanded":i,"aria-haspopup":"true",onClick:r,label:(0,w.__)("Change campaign name","mailpoet"),children:e&&(0,w.__)("Rename","mailpoet")})]})},renderContent:()=>(0,Ve.jsx)("div",{className:"mailpoet-email-editor-email-title-edit",children:(0,Ve.jsx)(s.TextControl,{label:(0,w.__)("Campaign name","mailpoet"),value:t,onChange:e=>{n(e)},name:"campaign_name",help:(0,w.__)("Name your email campaign to indicate its purpose. This would only be visible to you and not shown to your subscribers.","mailpoet")})})})})}function Mt(){const[e]=(0,c.useEntityProp)("postType","mailpoet_email","mailpoet_data"),{hasEmptyContent:t}=(0,a.useSelect)((e=>({hasEmptyContent:e(m).hasEmptyContent()})),[]),n=e;return(0,Ve.jsx)(s.Button,{variant:"primary",onClick:()=>{window.location.href=`admin.php?page=mailpoet-newsletters#/send/${n.id}`},disabled:t,children:(0,w.__)("Send","mailpoet")})}function Lt(){const e=(0,o.useRef)(),t=(0,o.useRef)(),n=(0,o.useRef)(),i=(0,o.useRef)(),{toggleInserterSidebar:r,toggleListviewSidebar:l}=(0,a.useDispatch)(m),{undo:d,redo:p}=(0,a.useDispatch)(c.store),{isInserterSidebarOpened:u,isListviewSidebarOpened:h,hasUndo:g,hasRedo:_}=(0,a.useSelect)((e=>({isInserterSidebarOpened:e(m).isInserterSidebarOpened(),isListviewSidebarOpened:e(m).isListviewSidebarOpened(),hasUndo:e(c.store).hasUndo(),hasRedo:e(c.store).hasRedo()})),[]),v=e=>{e.preventDefault()},f=u?(0,w.__)("Close"):(0,w.__)("Add");return(0,Ve.jsxs)("div",{className:"edit-post-header",children:[(0,Ve.jsxs)("div",{className:"edit-post-header__toolbar",children:[(0,Ve.jsx)(Fe.NavigableToolbar,{className:"edit-post-header-toolbar","aria-label":(0,w.__)("Email document tools","mailpoet"),children:(0,Ve.jsxs)("div",{className:"edit-post-header-toolbar__left",children:[(0,Ve.jsx)(s.ToolbarItem,{ref:e,as:s.Button,className:"edit-post-header-toolbar__inserter-toggle",variant:"primary",isPressed:u,onMouseDown:v,onClick:r,disabled:!1,icon:_t,label:f,showTooltip:!0,"aria-expanded":u}),(0,Ve.jsx)(s.ToolbarItem,{ref:n,as:s.Button,className:"editor-history__undo",isPressed:!1,onMouseDown:v,onClick:d,disabled:!g,icon:vt,label:(0,w.__)("Undo"),showTooltip:!0}),(0,Ve.jsx)(s.ToolbarItem,{ref:i,as:s.Button,className:"editor-history__redo",isPressed:!1,onMouseDown:v,onClick:p,disabled:!_,icon:ft,label:(0,w.__)("Redo"),showTooltip:!0}),(0,Ve.jsx)(s.ToolbarItem,{ref:t,as:s.Button,className:"edit-post-header-toolbar__document-overview-toggle",isPressed:h,onMouseDown:v,onClick:l,disabled:!1,icon:wt,label:(0,w.__)("List view","mailpoet"),showTooltip:!0,"aria-expanded":u})]})}),(0,Ve.jsx)("div",{className:"edit-post-header__center",children:(0,Ve.jsx)(At,{})})]}),(0,Ve.jsxs)("div",{className:"edit-post-header__settings",children:[(0,Ve.jsx)(Tt,{}),(0,Ve.jsx)(Ct,{}),(0,Ve.jsx)(Mt,{}),(0,Ve.jsx)(X.Slot,{scope:m}),(0,Ve.jsx)(yt,{})]})]})}function Rt(){return(0,Ve.jsx)("div",{className:"edit-post-editor__inserter-panel edit-post-editor__document-overview-panel",children:(0,Ve.jsx)("div",{className:"edit-post-editor__list-view-panel-content",children:(0,Ve.jsx)("div",{className:"edit-post-editor__list-view-container",children:(0,Ve.jsx)(Fe.__experimentalListView,{})})})})}function Bt(){return(0,Ve.jsx)("div",{className:"edit-post-editor__inserter-panel ",children:(0,Ve.jsx)("div",{className:"edit-post-editor__inserter-panel-content",children:(0,Ve.jsx)(Fe.__experimentalLibrary,{showMostUsedBlocks:!0,showInserterHelpPanel:!1,rootClientId:void 0,__experimentalInsertionIndex:void 0})})})}function Ot(){const{notices:e}=(0,a.useSelect)((e=>({notices:e(le.store).getNotices()})),[]),{removeNotice:t}=(0,a.useDispatch)(le.store),n=e.filter((e=>{let{isDismissible:t,type:n}=e;return t&&"default"===n})),i=e.filter((e=>{let{isDismissible:t,type:n}=e;return!t&&"default"===n}));return(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(s.NoticeList,{notices:i,className:"components-editor-notices__pinned"}),(0,Ve.jsx)(s.NoticeList,{notices:n,className:"components-editor-notices__dismissible",onRemove:t})]})}function Ft(){const{notices:e}=(0,a.useSelect)((e=>({notices:e(le.store).getNotices()})),[]),{removeNotice:t}=(0,a.useDispatch)(le.store),n=e.filter((e=>{let{type:t}=e;return"snackbar"===t}));return(0,Ve.jsx)(s.SnackbarList,{notices:n,className:"components-editor-notices__snackbar",onRemove:t})}function Vt(){const{isFullscreenActive:e,isSidebarOpened:t,initialSettings:n,previewDeviceType:i,isInserterSidebarOpened:r,isListviewSidebarOpened:o,isEmailLoaded:s,postId:l,canUserEditMedia:d,hasFixedToolbar:p,focusMode:u,layoutStyles:h,layout:g}=(0,a.useSelect)((e=>({isFullscreenActive:e(m).isFeatureActive("fullscreenMode"),isSidebarOpened:e(m).isSidebarOpened(),isInserterSidebarOpened:e(m).isInserterSidebarOpened(),isListviewSidebarOpened:e(m).isListviewSidebarOpened(),postId:e(m).getEmailPostId(),initialSettings:e(m).getInitialEditorSettings(),previewDeviceType:e(m).getPreviewState().deviceType,isEmailLoaded:e(m).isEmailLoaded(),canUserEditMedia:e(c.store).canUser("create","media"),hasFixedToolbar:e(m).isFeatureActive("fixedToolbar"),focusMode:e(m).isFeatureActive("focusMode"),layoutStyles:e(m).getLayoutStyles(),layout:e(m).getLayout()})),[]),_=f()("interface-interface-skeleton","edit-post-layout",{"is-sidebar-opened":t}),[v,w,b]=(0,c.useEntityBlockEditor)("postType","mailpoet_email",{id:l}),y=h.background;let E=(0,Fe.__experimentalUseResizeCanvas)(i);E||(E={height:"auto",margin:"4rem auto",width:h.width,display:"flex",flexFlow:"column"}),E.transition="all 0.3s ease 0s";const x={background:"Desktop"===i?y:"transparent"},S={...n,mediaUpload:d?nt.uploadMedia:null,hasFixedToolbar:p,focusMode:u};return s?(0,Ve.jsxs)(Fe.BlockEditorProvider,{value:v,onInput:w,onChange:b,settings:S,useSubRegistry:!1,children:[(0,Ve.jsx)(ne,{isActive:e}),(0,Ve.jsx)(tt.UnsavedChangesWarning,{}),(0,Ve.jsx)(it,{}),(0,Ve.jsx)(gt,{}),(0,Ve.jsx)(ae,{className:_,header:(0,Ve.jsx)(Lt,{}),editorNotices:(0,Ve.jsx)(Ot,{}),notices:(0,Ve.jsx)(Ft,{}),content:(0,Ve.jsxs)(Ve.Fragment,{children:[(0,Ve.jsx)(Ot,{}),(0,Ve.jsx)("div",{className:"edit-post-visual-editor",children:(0,Ve.jsx)(Fe.BlockSelectionClearer,{className:"edit-post-visual-editor__content-area",style:x,children:(0,Ve.jsxs)("div",{style:E,className:f()({"is-mobile-preview":"Mobile"===i,"is-desktop-preview":"Desktop"===i}),children:[(0,Ve.jsx)(Fe.__unstableEditorStyles,{styles:S.styles,scope:".editor-styles-wrapper"}),(0,Ve.jsxs)(Fe.BlockSelectionClearer,{className:"editor-styles-wrapper block-editor-writing-flow",style:{width:"100%"},children:[(0,Ve.jsx)(Fe.BlockEditorKeyboardShortcuts.Register,{}),(0,Ve.jsx)(Fe.BlockTools,{children:(0,Ve.jsx)(Fe.WritingFlow,{children:(0,Ve.jsx)(Fe.ObserveTyping,{children:(0,Ve.jsx)(Fe.BlockList,{className:f()({"is-mobile-preview":"Mobile"===i},"is-layout-constrained has-global-padding"),layout:g})})})})]})]})})})]}),sidebar:(0,Ve.jsx)(te.Slot,{scope:m}),secondarySidebar:r&&(0,Ve.jsx)(Bt,{})||o&&(0,Ve.jsx)(Rt,{})})]}):null}function Dt(){const{isSidebarOpened:e,hasEdits:t,isSaving:n}=(0,a.useSelect)((e=>({isSidebarOpened:e(m).isSidebarOpened(),isSaving:e(m).isSaving(),hasEdits:e(m).hasEdits()}))),{openSidebar:i,closeSidebar:r,saveEditedEmail:s,toggleFeature:c}=(0,a.useDispatch)(m),{registerShortcut:d}=(0,a.useDispatch)(l.store);return(0,o.useEffect)((()=>{d({name:"mailpoet/email-editor/toggle-fullscreen",category:"global",description:(0,w.__)("Toggle fullscreen mode.","mailpoet"),keyCombination:{modifier:"secondary",character:"f"}}),d({name:"mailpoet/email-editor/toggle-sidebar",category:"global",description:(0,w.__)("Show or hide the settings sidebar.","mailpoet"),keyCombination:{modifier:"primaryShift",character:","}}),d({name:"mailpoet/email-editor/save",category:"global",description:(0,w.__)("Save your changes.","mailpoet"),keyCombination:{modifier:"primary",character:"s"}})}),[d]),(0,l.useShortcut)("mailpoet/email-editor/toggle-fullscreen",(()=>{c("fullscreenMode")})),(0,l.useShortcut)("mailpoet/email-editor/toggle-sidebar",(t=>{t.preventDefault(),e?r():i()})),(0,l.useShortcut)("mailpoet/email-editor/save",(e=>{e.preventDefault(),t&&!n&&s()})),null}function zt(){const{postId:e}=(0,a.useSelect)((e=>({postId:e(m).getEmailPostId()})),[]);return(0,Ve.jsx)(o.StrictMode,{children:(0,Ve.jsx)(l.ShortcutProvider,{children:(0,Ve.jsxs)(s.SlotFillProvider,{children:[(0,Ve.jsx)(Dt,{}),(0,Ve.jsxs)(c.EntityProvider,{kind:"postType",type:"mailpoet_email",id:e,children:[(0,Ve.jsx)(Vt,{}),(0,Ve.jsx)(s.Popover.Slot,{})]})]})})})}function Gt(e){const t=document.getElementById(e);t&&((()=>{const e=(0,a.createReduxStore)(m,{actions:i,controls:g.controls,selectors:r,reducer:Ee,initialState:ye()});(0,a.register)(e)})(),(0,p.addFilter)("blocks.registerBlockType","mailpoet-email-editor/layout/addAttribute",Qe),(0,p.addFilter)("editor.BlockListBlock","mailpoet-email-editor/with-layout-styles",et),(0,p.addFilter)("editor.BlockEdit","mailpoet-email-editor/with-inspector-controls",Xe),(0,p.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-columns-allowed-nesting",((e,t)=>{if("core/column"===t){const t=(0,a.select)(m).getInitialEditorSettings(),n=t.allowedBlockTypes instanceof Array?t.allowedBlockTypes:[],i=[];return n.forEach((e=>{"core/column"!==e&&"core/columns"!==e&&"core/list-item"!==e&&"core/button"!==e&&i.push(e)})),{...e,attributes:{...e.attributes,allowedBlocks:{type:"array",default:i}}}}return e})),(0,p.addFilter)("editor.BlockEdit","mailpoet-email-editor/deactivate-stack-on-mobile",De),(0,p.addFilter)("editor.BlockEdit","mailpoet-email-editor/hide-expand-on-click",ze),(0,p.addFilter)("blocks.registerBlockType","mailpoet-email-editor/deactivate-image-filter",((e,t)=>"core/image"===t?{...e,supports:{...e.supports,filter:{duetone:!1}}}:e)),(0,Ge.unregisterFormatType)("core/image"),(0,Ge.unregisterFormatType)("core/code"),(0,Ge.unregisterFormatType)("core/language"),(0,Ge.unregisterFormatType)("core/text-color"),(0,p.addFilter)("blocks.registerBlockType","mailpoet-email-editor/disable-columns-layout",((e,t)=>"core/columns"===t||"core/column"===t?{...e,supports:{...e.supports,layout:!1}}:e)),(0,p.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-button",((e,t)=>"core/button"===t?{...e,styles:[]}:e)),(0,p.addFilter)("blocks.registerBlockType","mailpoet-email-editor/change-buttons",((e,t)=>"core/buttons"===t?{...e,supports:{...e.supports,layout:!1,__experimentalEmailFlexLayout:!0}}:e)),(0,d.registerCoreBlocks)(),(0,p.addFilter)("editor.MediaUpload","mailpoet/email-editor/replace-media-upload",(()=>nt.MediaUpload)),(0,o.createRoot)(t).render((0,Ve.jsx)(zt,{})))}window.addEventListener("DOMContentLoaded",(()=>{Gt("mailpoet-email-editor")}))}()}();